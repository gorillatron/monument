
<!DOCTYPE html>
  <html>
    <head>
      <title>Monument</title>
      <link rel="stylesheet" href="/style/style.css">
      <meta property="og:image" content="/images/feature_photos/profilepic.jpg">

      <script type="text/javascript" src="http://w.soundcloud.com/player/api.js"></script>
      <script src="//use.typekit.net/jor0qjq.js"></script>

      <script>
        try{
          Typekit.load();
        } catch(e){}
      </script>

      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-40625614-1', 'mnmt.no');
        ga('send', 'pageview');
      </script>

      <script>(function(d,s,i,r) {
        if (d.getElementById(i)){return;}
        var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
        n.id=i;n.src='//js.hubspot.com/analytics/'+(Math.ceil(new Date()/r)*r)+'/272217.js';
        e.parentNode.insertBefore(n, e);
        })(document,"script","hs-analytics",300000);
      </script>

      <script type="text/javascript" src="/js/lib/modernizr.js"></script>

    </head>
    <body>

      <script type="text/javascript" src="/main.js"></script>

      <div id="featured_container">

        <div class="static-header content">
          <h1>MONUMENT</h1>
        </div>

        <ul class="panes backgrounds"></ul>
        <script type="text/template" id="featured_background_pane">
          <li class="pane podcast" style="background-image: url(<%= backgroundImage %>);"></li>
        </script>

        <ul class="panes players"></ul>
          <script type="text/template" id="featured_player_pane">
            <li class="pane podcast" data-numer="<%= number %>">
              <div class="content">
                <iframe id="player" width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F<%= scTrackId %>&amp;show_artwork=false&amp;color=A5BD7D"></iframe>
              </div>
            </li>
          </script>

        <ul class="panes h2"></ul>
          <script type="text/template" id="featured_h2_pane">
            <li class="pane podcast"> 
              <div class="content">
                <h2><%= numberFormated %>: <%= title %></h2> 
              </div>
            </li>
          </script>

        <ul class="panes description"></ul>
          <script type="text/template" id="featured_description_pane">
            <li class="pane podcast">
              <div class="content">
                <%= descriptionHtml %>
              </div>
            </li>
          </script>

        <div class="socialicons content">
          <a id="facebook" href="https://www.facebook.com/MonuMnt" target="_blank" class="socialicon"></a>
          <a id="twitter" href="https://twitter.com/MonumentPodcast" target="_blank" class="socialicon"></a>
        </div>

        <div class="arrow left"></div>
        <div class="arrow right"></div>

        <div class="shadowdome a"></div>
        <div class="shadowdome b"></div>

      </div>


      <script type="text/javascript" src="/js/main.js"></script>


      <script type="text/javascript">
        $(function() {

          var _ = _ || {}

          _.bind = function( fn, context ) {
            var args = Array.prototype.slice.call(arguments, 1)
            return function() {
              return fn.apply( context, args.concat(Array.prototype.slice.call(arguments, 0)) )
            }
          }


          function ShadowDome( options ) {
            this.$el = $( options.el )
            this.on = true
            this.screenwidth = screen.width
          }

          ShadowDome.prototype.generateShadowString = function( a, b, c, d, e ){
            a = a || 0,  b = b || 0,  c = c || 0,  d = d || 0,  e = e || 0
            return "box-shadow: " +a+ "px "+b+"px "+c+"px "+d+"px rgba(0,0,0, "+e+");"
          }

          ShadowDome.prototype.turnOff = function () {
            this.$el.fadeOut()
            this.on = false
          }

          ShadowDome.prototype.turnOn = function () {
            this.$el.fadeIn()
            this.on = true
          }

          ShadowDome.prototype.getPrctWidth = function () {
            return $(window).width() / this.screenwidth * 100
          }

          ShadowDome.prototype.render = function () {
            var prctwidth

            if( !this.on )
              return

            prctwidth = this.getPrctWidth()
            mod = 100 - prctwidth
            
            if( mod < 20 ) {
              mod = 20
            }

            this.$el.attr( 'style', 
             "border-radius: " + (mod * 100) +  "px;" + 
             this.generateShadowString(
              - (mod) * 1,
              - (mod) * 3,
              mod * 10,
              mod * 7,
              0.5
            ))
          }



          function Features( options ) {
            this.$el = $( options.el )

            this.pagenr = 1
            this.threeD = Modernizr.csstransforms
            this.shadowDome = new ShadowDome({ el: this.$el.find('.shadowdome') })

            this.$el.find( '.arrow.left' ).click( _.bind(this.leftClickHandler, this) )
            this.$el.find( '.arrow.right' ).click( _.bind(this.rightClickHandler, this) )
            $( window ).bind( 'resize', _.bind(this.windowResizeHandler, this) )
          }

          Features.prototype.leftClickHandler = function() {
            $('.arrow.right').fadeIn()
            $('.arrow.left').fadeOut()
            this.shadowDome.turnOn()
            this.pagenr = 1
            this.render()
          }

          Features.prototype.rightClickHandler = function() {
            $('.arrow.left').fadeIn()
            $('.arrow.right').fadeOut()
            this.shadowDome.turnOff()
            this.pagenr = 0
            this.render()
          }

          Features.prototype.windowResizeHandler = function() {
            setTimeout(_.bind(this.turnOffTransitions, this), 0)
            setTimeout(_.bind(this.render, this, true), 2)
            setTimeout(_.bind(this.turnOnTransitions, this), 10)
          }

          Features.prototype.render = function( noHeaderfade ) {
            var x
            
            x = $('body').width() * - this.pagenr

            if( this.threeD ) {
              this.$el.find( '.panes' ).attr( 'style', 
                '-moz-transform: translate3d(' + x + 'px, 0px, 0px);' +
                '-ms-transform: translate3d(' + x + 'px, 0px, 0px);' +
                '-o-transform: translate3d(' + x + 'px, 0px, 0px);' + 
                '-webkit-transform: translate3d(' + x + 'px, 0px, 0px);' + 
                'transform: translate3d(' + x + 'px, 0px, 0px);')  
            }
            else {
              this.$el.find('.panes').css( 'left', x )
            }
            this.shadowDome.render()
            if( !noHeaderfade ) {
              this.$el.find( '.panes.h2 h2' ).fadeOut( 2000 )
              $( this.$el.find('.panes.h2 h2')[this.pagenr] ).fadeIn( 2000 )
            }
          }

          Features.prototype.turnOffTransitions = function() {
            this.$el.find('.panes').addClass( 'no-transition' )
          }

          Features.prototype.turnOnTransitions = function() {
            this.$el.find('.panes').removeClass( 'no-transition' )
          }



          var features = new Features({ el: "#features_wrapper" })

          features.turnOffTransitions()
          features.render()
          setTimeout(function() {
            $('body').show()
            $('body').css( 'min-height',  $('.socialicons').offset().top + $('.socialicons').outerHeight() + 30 )
          }, 10)
          setTimeout(function() {
            features.turnOnTransitions()
          }, 1200)

        })
      </script>

    </body>
  </html>